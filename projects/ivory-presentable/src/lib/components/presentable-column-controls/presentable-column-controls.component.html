<div class="ivpt-column-controller">
  <button class="ivpt-column-controller-handle" (click)="_showController=!_showController">
    Columns
  </button>
  @if (_showController) {
    <div #ivptController class="ivpt-column-controller-modal" role="presentation">
      <div 
        class="ivpt-column-select-container" 
        (dragover)="onDragOver($event)"
        (drop)="onDrop($event)"
      >
        @for (colItem of columns; track colItem; let i=$index) {
          <div 
            class="ivpt-column-select-item" 
            draggable
            (click)="clickme()"
            (ondragstart)="onDragStart($event, colItem)"
            (dragstart)="onDragStart($event, colItem)"
          >
            <input 
              type="checkbox" 
              id="colItem.field" 
              value="colItem.field" 
              [checked]="colItem.visible"
              (change)="colItem.visible=!colItem.visible"
            >
            <label for="colItem.field">{{colItem.title}}</label>
        </div>
        }
      </div>
      <div class="ivpt-column-controller-submit">
        <button class="ivpt-button" (click)="applyControls()">
          Apply
        </button>
      </div>
    </div>
  }
</div>
